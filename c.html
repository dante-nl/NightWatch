<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Curfew timer - NightWatch</title>
    <link rel="stylesheet" href="https://nw-fallback.netlify.app/style.css" />
  </head>
  <body>
    <div class="topnav" id="navbar"><a href="/index" style="text-decoration: none; color: #ffffff; float: left;">Home</a><a href="premade" style="text-decoration: none; color: #e6e6e6; float: right;">Premade timers</a></div>
    <h1 id="countdown">Loading...</h1>
      <a class="button" href="/index">I want to make a countdown!</a>
    <script>
const queryString = new URLSearchParams(window.location.search);
const start = queryString.get('start');
const end = queryString.get('end');
if( start ) {
  if ( end )  {
  var countDownDate = new Date(`Feb 28, 6969 ${start}:00`).getTime();
  var countDownDate1 = new Date(`Feb 29, 6969 ${end}:00`).getTime();

  var x = setInterval(function() {

    var now = new Date().getTime();

    var distance = countDownDate1 - now;

    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    var distance1 = countDownDate - now;

    var days1 = Math.floor(distance1 / (1000 * 60 * 60 * 24));
    var hours1 = Math.floor((distance1 % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes1 = Math.floor((distance1 % (1000 * 60 * 60)) / (1000 * 60));
    var seconds1 = Math.floor((distance1 % (1000 * 60)) / 1000);

    document.getElementById("countdown").innerHTML = hours1 + ":"
    + minutes1 + ":" + seconds1 + " until curfew goes in and " + hours + ":"
    + minutes + ":" + seconds + " until it ends";

    if (distance < 0) {
      clearInterval(x);
      document.getElementById("countdown").innerHTML = "Counted down";
    }
  }, 1000); }

else {
  document.getElementById('countdown').innerHTML = `No end time has been given!` }
}
else {
  document.getElementById('countdown').innerHTML = `No time has been given!` }

</script>
  </body>
</html>
